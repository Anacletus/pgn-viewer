const pgns = {
  empty: ``,
  mammoth1: `
[Event "4th Match, 16th game, London 1834"]
[Site "https://lichess.org/study/EV81yS0v/EDqFMrdj"]
[Date "1834"]
[White "Alexander McDonnell"]
[Black "Louis Charles de Labourdonnais"]
[Result "0-1"]
[UTCDate "2022.07.13"]
[UTCTime "15:55:52"]
[Variant "Standard"]
[ECO "B32"]
[Opening "Sicilian Defense: LÃ¶wenthal Variation"]
[Annotator "https://lichess.org/@/nickvisel"]

{ This study contains games 1-?? (work in progress), part 1 of ??, from The Mammoth Book of the World's Greatest Chess Games: 4th edition. I'm putting games in as I go through the book.

You can find the book here for an absurdly low price: https://www.amazon.com/Mammoth-Worlds-Greatest-Chess-Games-ebook/dp/B08V23CZM5 }
1. e4 { By the way, I learned about this book thanks to the Perpetual Chess Podcast by Ben Johnson. Link here: https://www.perpetualchesspod.com/new-blog/2022/3/25/book-recap-25-the-mammoth-book-of-the-worlds-greatest-chess-games-with-nm-chrisopher-chabris-and-fm-graham-burgess } 1... c5 2. Nf3 Nc6 3. d4 cxd4 4. Nxd4 e5 5. Nxc6 (5. Nb5) 5... bxc6 6. Bc4 Nf6 7. Bg5 Be7 8. Qe2 { [%cal Ra6f1] } (8. Nc3)  (8. Bxf6 { [%cal Gb1c3,Ge7f6] } 8... Bxf6 9. Nc3) 8... d5 9. Bxf6 (9. exd5 cxd5 (9... Nxd5) 10. Bb5+ Bd7 11. Nc3 (11. Bxd7+ Nxd7 12. Bxe7 Qxe7 { [%csl Ge5,Gd5] }) 11... d4 12. Bxf6 Bxf6 13. Nd5 Qa5+ 14. b4 (14. c3 Bxb5 15. Qxb5+ Qxb5 16. Nc7+ Kd7 17. Nxb5 Rab8 { [%csl Rb2][%cal Gb8b2] }) 14... Bxb5 15. bxa5 Bxe2 16. Nc7+ { [%csl Ra5,Ra2,Rc2] } 16... Kd7 17. Nxa8 Ba6 { [%csl Ra8,Ga7,Gd7][%cal Ra8b6,Ra8c7] }) 9... Bxf6 10. Bb3 O-O 11. O-O a5 { [%csl Re2,Rf1][%cal Ga5a4,Gc8a6,Ga6f1] } 12. exd5 cxd5 13. Rd1 d4 14. c4 { [%csl Ge5,Gd4] } (14. c3)  (14. Nd2) 14... Qb6 15. Bc2 Bb7 (15... Qxb2 16. Bxh7+ { [%csl Gb2][%cal Re2b2] }) 16. Nd2 Rae8 { [%csl Ge8,Gf8,Bf7][%cal Ge5e4,Gf7f4,Bf6d8] } (16... Qxb2 17. Bxh7+ (17. Qd3 e4 (17... g6 18. Rab1 e4) 18. Nxe4 Bxe4 19. Qxe4 g6) 17... Kxh7 18. Rab1) 17. Ne4 Bd8 { [%cal Gf7f5] } 18. c5 Qc6 19. f3 Be7 { [%csl Rd6][%cal Re4d6] } 20. Rac1 f5 21. Qc4+ Kh8 (21... Qd5 22. Qb5 { [%csl Rd5][%cal Gc2b3,Gb3g8] })  (21... Rf7 22. Ba4 Qc8 23. Bxe8 Qxe8 24. Nd6 Bxd6 25. cxd6) 22. Ba4 Qh6 23. Bxe8 (23. Nd6 Bxd6 24. Bxe8 Bc7 25. c6 (25. Qb3 e4 26. g3 Ba6 { [%cal Ga6f1] } (26... Rxe8 27. Qxb7 Qe3+ 28. Kh1 Qxf3+ 29. Kg1)) 25... e4 26. cxb7 (26. h3 Qe3+ 27. Kf1 (27. Kh1 Qf4) 27... Bh2)  (26. g3 Qe3+ 27. Kf1 Qxf3+ 28. Kg1 Bxg3 (28... Bc8 29. Rf1) 29. hxg3 (29. Rf1 Qe3+ 30. Kg2 Be5 (30... Qd2+ 31. Kxg3 f4+ 32. Kh3 f3 33. Rg1 (33. Qc2 Qh6+ 34. Kg3 Qg5+ 35. Kf2 (35. Kh3 Rf4) 35... Qe3+ 36. Kg3 f2+ 37. Kg4 Qf3+ 38. Kh4 Rf4+ 39. Kg5 Qg4#) 33... Qh6+ 34. Kg3 Qf4+ 35. Kf2 (35. Kh3 Rf6 { [%cal Gf6h6] }) 35... Qxh2+ 36. Kf1 e3 { [%cal Ge3e2] }) 31. Qc5 (31. cxb7 Qh6 { [%csl Rh2][%cal Gh6h2] }) 31... Qd2+ 32. Rf2 Qg5+ 33. Kh1 Bd6 34. Qxd6 (34. Qc2 d3) 34... Qxc1+ 35. Kg2 Qg5+ 36. Kh1 Rxe8 (36... Qf6 37. Qxf6 gxf6 38. cxb7 Rxe8 39. Rc2 { [%csl Gb7][%cal Gc2c8] }) 37. cxb7) 29... Qxg3+ 30. Kf1 (30. Kh1 Rf6 { [%cal Gf6h6] }) 30... d3 31. Qc5 (31. cxb7 e3) 31... Rxe8 32. Qg1 Qf3+ 33. Qf2 Qxf2+ 34. Kxf2 e3+ { [%csl Ge1][%cal Gb7a6,Ra6f1,Ge3e2,Ge2e1,Ge8e1] }) 26... Qxh2+ 27. Kf1 exf3 28. gxf3 Qh3+ 29. Ke2 Rxe8+ 30. Kd3 Qxf3+ 31. Kc2 Qxb7) 23... fxe4 24. c6 exf3 (24... Qe3+ 25. Kh1 exf3) 25. Rc2 (25. cxb7 Qe3+ 26. Kh1 fxg2+)  (25. gxf3 Qe3+ 26. Kh1 Qxf3+ 27. Kg1 Rf5) 25... Qe3+ (25... Bc8 26. Bd7) 26. Kh1 (26. Rf2) 26... Bc8 27. Bd7 { [%csl Rd7,Rc8][%cal Gc8f5,Gc8g4] } (27. Bf7 Bg4 28. c7 (28. Rf1 d3 29. Rcf2 d2) 28... fxg2+ 29. Rxg2 Bxd1 30. c8=Q Qe1+ 31. Rg1 Bf3#) 27... f2 { [%cal Gd4d3,Ge3e1,Gc4f1,Ge1d1,Gf2f1,Gf8f1] } 28. Rf1 (28. Qf1 Ba6) 28... d3 29. Rc3 Bxd7 30. cxd7 (30. Rxd3 Be6 (30... Qe2 31. Rc3) 31. Qc2 Qc5) 30... e4 { [%cal Ge3e1] } 31. Qc8 Bd8 32. Qc4 (32. Qc6 Qe1)  (32. Rcc1 Qf4 { [%cal Ge4e3,Ge3e2] }) 32... Qe1 33. Rc1 d2 34. Qc5 Rg8 35. Rd1 e3 36. Qc3 Qxd1 37. Rxd1 e2 0-1
`,
  commentMin1: `1. d4 { some comment! } d5 { and some more! } 2. Nc3`,
  commentMin2: ` 1. e4 { mainline comment! } e5 2. f4 Nf6 (2... Be7 { some comment } 3. Nf3 { another comment }) 3. Nc3 * `,
  shapeMin1: `{ [%csl Gd4,Gf5] }
1. d4 {before [%cal Re2e4] between [%csl Ye5] after} d5 { and some more! }`,
  e4idea1: `
[Event "4. e4! Idea in Rapport-Jobava System: Casabianka's Line"]
[Site "https://lichess.org/study/AiSH1ore/feJhofs0"]
[Result "*"]
[UTCDate "2022.07.19"]
[UTCTime "12:23:50"]
[Variant "Standard"]
[ECO "D01"]
[Opening "Rapport-Jobava System"]
[Annotator "https://lichess.org/@/continuum12"]

{ [%csl Gd4,Gf5] }
1. d4 {before [%cal Re2e4] between [%csl Ye5] after} d5 { and some more! } 2. Nc3 Nf6 3. Bf4 { The Rapport-Jobava system. If you do not yet know what this is, I recommend checking out https://lichess.org/@/continuum12/blog/introducingthe-rapport-jobava-system/R6iFupKK. } 3... c5 4. e4!? { Gambit2Mate's idea; it is not original (has been played before) but Gambit2Mate and others are analyzing this line more extensively and adding a lot of novelties. } 4... Nxe4 { See "other lines" for other lines. However, Nxe4 is the mainline and then best line for Black. } 5. Nb5 $146 { Casabianka suggested this surprisingly practical choice that the computer dislikes at first but then realizes it is fine: } 5... Na6 6. f3 Nf6 7. dxc5 g6! { Only way to develop the bishop for Black. } (7... e6? 8. Nd6+ { Runs into this annoying Nd6 idea }) 8. Be5 Bg7 9. Nc3 { [%csl Rd5][%cal Gc3d5,Gd1d5,Ge5h8] } 9... O-O (9... Nxc5!? { The top engine line that leads to something I cannot yet fully comprehend: } 10. Nxd5 O-O { wow! } 11. Nc7 Ncd7 { Exchange sac: } 12. Nxa8 Nxe5 13. Qxd8 Rxd8 14. Nc7 Bf5 15. c3 Rd7 16. Nb5 Bd3 { Black's activity allows more than enough compensation according to the engine. }) 10. Bxa6 (10. Bxf6? Bxf6 11. Nxd5 Bxb2 12. Rb1 Bg7 13. c4?! { For example } 13... Nxc5 $19 { Is just not good for White! White's weakened king and lack of development causes way too much prblems } { [%cal Ga8c8,Gc8f5,Gd8a5] }) 10... bxa6 11. Nge2 e6 12. Qd4 Nh5 13. O-O-O { Casabianka - continuum12, 1-0, -, lichess.org/Syv5DHdg7U3p } { [%cal Gg2g4,Gh2h4] } *
`,
  croatia: `[Event "SuperUnited Rapid & Blitz Croatia"]
[Site "Zagreb, Croatia"]
[Date "2022.07.24"]
[Round "19.1"]
[White "Saric, Ivan"]
[Black "Vachier-Lagrave, Maxime"]
[Result "0-1"]
[WhiteTitle "GM"]
[WhiteElo "2680"]
[BlackElo "2760"]
[UTCDate "2022.07.24"]
[UTCTime "11:30:10"]
[Variant "Standard"]
[ECO "B90"]
[Opening "Sicilian Defense: Najdorf Variation"]
[Annotator "https://lichess.org/@/Yeltcki"]

1. e4 { [%clk 0:05:03] } 1... c5 { [%clk 0:05:03] } 2. Nf3 { [%clk 0:05:04] } 2... d6 { [%clk 0:05:04] } 3. d4 { [%clk 0:05:05] } 3... cxd4 { [%clk 0:05:05] } 4. Nxd4 { [%clk 0:05:06] } 4... Nf6 { [%clk 0:05:06] } 5. Nc3 { [%clk 0:05:07] } 5... a6 { [%clk 0:05:08] } 6. f3 { [%clk 0:05:02] } 6... e5 { [%clk 0:05:07] } 7. Nb3 { [%clk 0:05:03] } 7... Be6 { [%clk 0:05:08] } 8. Be3 { [%clk 0:05:04] } 8... h5 { [%clk 0:05:07] } 9. Nd5 { [%clk 0:05:03] } 9... Bxd5 { [%clk 0:05:08] } 10. exd5 { [%clk 0:05:04] } 10... Nbd7 { [%clk 0:05:07] } 11. Qd2 { [%clk 0:04:58] } 11... g6 { [%clk 0:05:08] } 12. O-O-O { [%clk 0:04:31] } 12... Bg7 { [%clk 0:05:09] } 13. Kb1 { [%clk 0:04:29] } 13... Rc8 { [%clk 0:05:09] } 14. Be2 { [%clk 0:04:19] } 14... O-O { [%clk 0:04:48] } 15. g4 { [%clk 0:04:14] } 15... Nb6 { [%clk 0:04:10] } 16. Bg5 { [%clk 0:03:26] } 16... hxg4 { [%clk 0:04:09] } 17. fxg4 { [%clk 0:03:16] } 17... Qd7 { [%clk 0:03:00] } 18. Bxf6 { [%clk 0:03:16] } 18... Bxf6 { [%clk 0:03:01] } 19. h4 { [%clk 0:03:15] } 19... e4 { [%clk 0:02:57] } 20. g5 { [%clk 0:03:11] } 20... Be5 { [%clk 0:02:34] } 21. h5 { [%clk 0:02:55] } 21... Nc4 { [%clk 0:02:35] } 22. Bxc4 { [%clk 0:02:55] } 22... Rxc4 { [%clk 0:02:36] } 23. Qe2 { [%clk 0:02:34] } 23... b5 { [%clk 0:02:16] } 24. c3 { [%clk 0:02:10] } 24... e3 { [%clk 0:01:24] } 25. Qxe3 { [%clk 0:02:03] } 25... b4 { [%clk 0:01:25] } 26. Na5 { [%clk 0:01:48] } 26... Rg4 { [%clk 0:01:09] } 27. Nc6 { [%clk 0:01:44] } 27... bxc3 { [%clk 0:01:08] } 28. Nxe5 { [%clk 0:01:40] } 28... dxe5 { [%clk 0:01:01] } 29. Qxc3 { [%clk 0:01:36] } 29... Qf5+ { [%clk 0:00:58] } 30. Ka1 { [%clk 0:01:35] } 30... Rc8 { [%clk 0:00:57] } 31. Qb3 { [%clk 0:01:25] } 31... gxh5 { [%clk 0:00:39] } 32. d6 { [%clk 0:01:09] } 32... Rd4 { [%clk 0:00:34] } 33. Rdf1 { [%clk 0:00:38] } 33... Qe6 { [%clk 0:00:24] } 34. Qf3 { [%clk 0:00:28] } 34... h4 { [%clk 0:00:20] } 35. Qh5 { [%clk 0:00:20] } 35... Ra4 { [%clk 0:00:15] } 36. a3 Rc3 { [%clk 0:00:10] } 37. Qxf7+ { [%clk 0:00:09] } 37... Qxf7 { [%clk 0:00:11] } 38. Rxf7 { [%clk 0:00:11] } 38... Rcxa3+ { [%clk 0:00:08] } 39. bxa3 { [%clk 0:00:11] } 39... Kxf7 { [%clk 0:00:09] } 40. Kb2 { [%clk 0:00:04] } 40... Rg4 { [%clk 0:00:09] } 41. Kc3 { [%clk 0:00:05] } 41... Ke6 { [%clk 0:00:10] } 42. g6 { [%clk 0:00:04] } 42... Kxd6 { [%clk 0:00:11] } 43. g7 { [%clk 0:00:06] } 43... Rxg7 { [%clk 0:00:08] } 44. Rxh4 { [%clk 0:00:07] } 44... Kd5 { [%clk 0:00:08] } 45. Ra4 { [%clk 0:00:08] } 45... Rg3+ { [%clk 0:00:09] } 46. Kd2 { [%clk 0:00:09] } 46... Rg6 { [%clk 0:00:09] } 47. Ke3 { [%clk 0:00:10] } 47... Re6 { [%clk 0:00:08] } 48. Ra5+ { [%clk 0:00:11] } 48... Kc4 { [%clk 0:00:08] } 49. Ke4 { [%clk 0:00:12] } 49... Kb3 { [%clk 0:00:10] } 50. Kd5 { [%clk 0:00:09] } 50... Rb6 { [%clk 0:00:11] } 51. Ke4 { [%clk 0:00:06] } 51... Rh6 { [%clk 0:00:06] } 52. Rxe5 { [%clk 0:00:05] } 52... Kxa3 { [%clk 0:00:07] } 53. Kd3 { [%clk 0:00:05] } 53... Kb3 { [%clk 0:00:08] } 54. Kd2 { [%clk 0:00:04] } 54... Kb2 { [%clk 0:00:09] } 55. Rd5 { [%clk 0:00:04] } 55... Rb6 { [%clk 0:00:08] } 56. Kd3 { [%clk 0:00:03] } 56... Rb5 { [%clk 0:00:09] } 57. Rd6 { [%clk 0:00:04] } 57... a5 { [%clk 0:00:10] } 58. Kc4 { [%clk 0:00:04] } 58... Rb4+ { [%clk 0:00:11] } 59. Kd3 { [%clk 0:00:05] } 59... a4 { [%clk 0:00:11] } 60. Rg6 { [%clk 0:00:05] } 60... a3 { [%clk 0:00:12] } 61. Rg2+ { [%clk 0:00:07] } 61... Kb3 { [%clk 0:00:13] } 62. Rg1 { [%clk 0:00:03] } 62... a2 { [%clk 0:00:14] } 63. Kd4 0-1`,
  lichess: `[Event "Rated Bullet game"]
[Site "https://lichess.org/PeeVghKM"]
[Date "2022.07.25"]
[White "Ch1llax"]
[Black "Infinity-Stones"]
[Result "0-1"]
[UTCDate "2022.07.25"]
[UTCTime "12:42:38"]
[WhiteElo "2897"]
[BlackElo "2874"]
[WhiteRatingDiff "-6"]
[BlackRatingDiff "+6"]
[WhiteTitle "IM"]
[BlackTitle "GM"]
[Variant "Standard"]
[TimeControl "60+0"]
[ECO "C44"]
[Opening "Ponziani Opening: Neumann Gambit"]
[Termination "Normal"]
[Annotator "lichess.org"]

1. e4 e5 2. Nf3 Nc6 3. Bc4 Nf6 4. c3? { (0.18 â -0.98) Mistake. d3 was best. } { C44 Ponziani Opening: Neumann Gambit } (4. d3 Bc5 5. O-O d6 6. Re1 O-O 7. c3 a5 8. h3 h6) 4... Nxe4 5. Bd5?! { (-0.82 â -1.45) Inaccuracy. O-O was best. } (5. O-O d5 6. Bb5 Bd6 7. Re1 O-O 8. d3 Nf6 9. Bxc6 bxc6) 5... Nf6 6. Bxc6 dxc6 7. Nxe5 Bd6?! { (-1.13 â -0.52) Inaccuracy. Nd7 was best. } (7... Nd7 8. Nxd7 Qe7+ 9. Qe2 Bxd7 10. d4 O-O-O 11. Qxe7 Bxe7 12. b4) 8. d4 Bxe5 9. dxe5?! { (-0.71 â -1.75) Inaccuracy. Qe2 was best. } (9. Qe2 O-O 10. dxe5 Re8 11. O-O Bf5 12. Re1 Nd7 13. Bf4 Nc5 14. Rd1 Qh4 15. Bg3 Qe4) 9... Qxd1+ 10. Kxd1 Ng4 11. Rf1?? { (-1.84 â -4.46) Blunder. Ke2 was best. } (11. Ke2 Nxe5 12. Bf4 O-O 13. Re1 Bg4+ 14. f3 Rfe8 15. Kf1 Nd3 16. Rxe8+ Rxe8 17. Bg3 Bc8) 11... Nxh2?? { (-4.46 â 0.00) Blunder. Bf5 was best. } (11... Bf5 12. Be3 O-O-O+ 13. Nd2 Nxe5 14. b4 f6 15. Re1 Nd3 16. Rg1 Rhe8 17. a4 g5 18. g4) 12. Re1 Ng4 13. f3 Nh6 14. Bxh6 gxh6 15. Nd2 Bf5 16. Ke2 O-O-O 17. Rad1? { (0.13 â -1.31) Mistake. g4 was best. } (17. g4 Be6 18. Rh1 Rhg8 19. Ne4 h5 20. Nf6 hxg4 21. Nxg8 gxf3+ 22. Kxf3 Bd5+ 23. Ke3 Bxh1) 17... Bd3+? { (-1.31 â 0.05) Mistake. Rd5 was best. } (17... Rd5 18. Nc4 Rc5 19. Rd4 b5 20. Na5 Rxe5+ 21. Kd2 Rxe1 22. Kxe1 Re8+ 23. Kf2 Re6 24. b4) 18. Kf2?? { (0.05 â -5.75) Blunder. Ke3 was best. } (18. Ke3 Rhg8) 18... Bc2 19. Ke3 Bxd1 20. Rxd1 Rhe8?! { (-5.99 â -4.39) Inaccuracy. Rd5 was best. } (20... Rd5 21. f4 Rhd8 22. g4 Rd3+ 23. Ke2 h5 24. gxh5 Rh3 25. Rg1 Rh2+ 26. Ke3 Rdxd2 27. Rg7) 21. f4 f5?? { (-4.43 â -1.79) Blunder. f6 was best. } (21... f6) 22. Rh1 Rg8 23. Nf3 Rxg2 24. Rxh6?! { (-1.80 â -2.90) Inaccuracy. Nd4 was best. } (24. Nd4) 24... Rxb2 25. Rxh7?? { (-2.26 â -5.25) Blunder. Nd4 was best. } (25. Nd4 Rxa2 26. Nxf5 Ra1 27. Ne7+ Kb8 28. f5 a5 29. f6 a4 30. Rh2 Re1+ 31. Kf4 Rf1+) 25... Rc2 26. Ng5?! { (-5.41 â -7.07) Inaccuracy. e6 was best. } (26. e6 Rxc3+ 27. Kf2 Rc2+ 28. Kg3 Re8 29. Ne5 Rxa2 30. Rf7 Rd2 31. e7 Rd7 32. Nxd7 Kxd7) 26... Rxc3+ 27. Ke2 Rc4 28. Ne6 Re8 29. Nxc7 Rg8 30. Ne6 Rg2+ 31. Kf3 Rxa2 32. Rc7+ Kb8 33. Rd7?? { (-6.83 â Mate in 2) Checkmate is now unavoidable. Ke3 was best. } (33. Ke3 a5) 33... Ra3+?? { (Mate in 2 â -6.05) Lost forced checkmate sequence. Rc3+ was best. } (33... Rc3+ 34. Rd3 Rxd3#) 34. Ke2 a6 35. Nd4 Rb4 36. e6?! { (-6.70 â -17.82) Inaccuracy. Rd8+ was best. } (36. Rd8+ Kc7) 36... Rb2+ 37. Nc2 Rxc2+ 38. Kd1?! { (-15.06 â Mate in 11) Checkmate is now unavoidable. Ke1 was best. } (38. Ke1 Kc8 39. Rd2 Rxd2 40. Kxd2 Kc7 41. Kc2 Rh3 42. Kd1 Kd6 43. Ke1 Kxe6 44. Kf2 Ra3) 38... Rh2 { White resigns. } 0-1`,
};

[
  { pgn: pgns.croatia },
  { pgn: pgns.lichess },
  // { pgn: pgns.commentMin1, },
  // { pgn: pgns.mammoth1 },
].forEach((cfg, i) => LichessPgnViewer(document.querySelector(`.viewers > div:nth-child(${i + 1}) > div`), cfg));
